/** 
 * jibo - jibo api
 * @version v2.0.5
 * Copyright (c) 2016, Jibo, Inc. All rights reserved.
 * All use of the Jibo SDK is subject to the Jibo SDK End User License Agreement (EULA) 
 * distributed herewith.  If you did not receive a copy of the EULA, you may view a
 * copy at https://developers.jibo.com/license.
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.jibo=t()}}(function(){return function t(e,i,n){function s(o,u){if(!i[o]){if(!e[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=i[o]={exports:{}};e[o][0].call(l.exports,function(t){var i=e[o][1][t];return s(i?i:t)},l,l.exports,t,e,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("animation-utilities"),r=t("path"),o=n(r),u=t("fs"),a=n(u),c=t("async"),l=n(c);let f=null;try{f=t("ipc")}catch(d){console.warn("Not running inside Electron")}GLOBAL.jibo=null;class h{constructor(t){var e=this;if(GLOBAL.jibo){throw new Error("Jibo Singleton may only be initialized once.")}GLOBAL.jibo=this;this.utils=t.utils;this.services=t.services;this.animate=s.animate.createAnimationUtilities();this.asr=new t.services.asr.ASRService;this.bt=new t.bt.Factory(t.bt);this.nlu=new t.services.NLUService;this.lps=new t.services.LPSService;this.tts=new t.services.TTSService;this.body=new t.services.BodyService;this.session=new t.services.SessionManager;this.systemManager=new t.services.SystemManager;this.behaviorEmitter=new t.bt.BehaviorEmitter;this.visualize=s.visualize;this._serviceInit={tts:function i(t,n){e.tts.init(t,n)},lps:function n(t,i){e.lps.init(t,i)},body:function r(t,i){let n="ws:"+t.host+":"+t.port;let r=new s.body.BodyPosVelOutput(e.visualize.timeline.getClock(),e.visualize.robotInfo,n,true,33);e.visualize.timeline.addOutput(r,null);var o=new s.LEDOutput(e.visualize.timeline.getClock(),e.visualize.robotInfo,n,true,33);e.visualize.timeline.addOutput(o,null);e.body.init(t,i)},nlu:function o(t,i){e.nlu.init(t,i)},asr:function u(t,i){e.asr.init(t,i)},systemManager:function a(t,i){e.systemManager.init(t,i)}}}requireAssetPack(e){if(a.default.existsSync(e)){var i=t(e);if(i.jibo&&i.jibo.type==="asset-pack"){var n=o.default.resolve(o.default.parse(e).dir,i.main);return t(n)}}}init(t){var e=this;if(typeof t==="function"){this._init(t)}else{return new Promise(function(t,i){e._init(function(e){if(e){i(e)}else{t()}})})}}_init(t){var e=this;if(h.isInitializing||h.isInitialized){throw new Error("Jibo Singleton may only be initialized once.")}h.isInitializing=true;const i=function s(t){e.initNetwork(t)};const n=function r(t){e.utils.AnimationUtils.init(e.animate,t)};l.default.series([n,i],function(e){if(e){let i=`<div style="position:absolute;top:0px;left:0px;width:100%;height:100%;z-index:999999;background:#a7a7a7;text-align:center;">`;i+=`<span style="position:absolute;top:250px;left:0px;font-size:44px;font-weight:bold;font-family:Arial;color:#c50000;padding:20px;">${e}</span>`;i+=`</div>`;document.body.innerHTML+=i;t(e)}else{h.isInitialized=true;t()}})}initNetwork(t){var e=this;let i;let n;l.default.series([function(t){if(!f)return t();f.on("set-registry-host",function(n){if(typeof n==="string"||n instanceof String){i=n}else{i=n.registryHost;if(n.token){e.session.token=n.token;console.warn("Session Token = "+e.session.token)}}t()})},function(t){let e=new XMLHttpRequest;e.timeout=2e3;e.onreadystatechange=function(){if(e.readyState===4&&e.status===200){n=JSON.parse(e.responseText);if(n.records){n=n.records;n.sort(function(t,e){if(t.name==="system-manager"){return-1}if(e.name==="system-manager"){return 1}return-1})}t()}else if(e.readyState===4&&e.status===0){t("Could not find registry service at "+i)}};e.open("GET",i,true);e.send(null)},function(){let i=[];n.forEach(function(t){let n=e._serviceInit[t.name];if(t.name==="system-manager"){n=e._serviceInit.systemManager}if(n){i.push(function(e){n(t,e)})}});l.default.parallel(i,function(e,i){if(e){t(e)}else{t(null,i)}})}],function(e,i){if(e){t(e)}else{t(null,i)}});if(f)f.send("get-registry-host")}static get instance(){return GLOBAL.jibo}}h.isInitializing=!1,h.isInitialized=!1,i["default"]=h},{"animation-utilities":void 0,async:void 0,fs:void 0,ipc:void 0,path:void 0}],2:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("./Status"),r=n(s);class o{constructor(t,e){t=t||{};e=e||{};this.options=Object.assign({name:"",emitter:null,blackboard:null,assetPack:""},e,t);this._status=r.default.INVALID;this.blackboard=this.options.blackboard;this.emitter=this.options.emitter;this.assetPack=this.options.assetPack||""}get name(){return this.options.name}get currentStatus(){return this._status}start(){return true}stop(){}}i["default"]=o},{"./Status":10}],3:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("./Status"),r=n(s),o=t("./BaseElement"),u=n(o);class a extends u.default{constructor(t,e){super(t,Object.assign({decorators:[]},e||{}));this.decorators=this.options.decorators;this.parent=null;this.waitDecorators=[];this.waitDecoratorsLength=0}get decorators(){return this._decorators}set decorators(t){var e=this;this._decorators=t;t.forEach(function(t){t.behavior=e})}update(){throw new Error("Behavior sub-class must override update()")}_pause(){this.previousStatus=this._status;this._status=r.default.PAUSED}_unpause(){this._status=this.previousStatus}_start(){if(this._status===r.default.IN_PROGRESS){return false}var t;this.waitDecorators.length=this.waitDecoratorsLength=0;if(this._decorators.length){for(var e=0;e<this._decorators.length;e++){t=this._decorators[e]._start();if(t===r.default.WAIT){this.waitDecorators.push(this._decorators[e]);this.waitDecoratorsLength++}else if(!t){this._status=r.default.FAILED;this._stop();return false}}}if(this.waitDecorators.length===0){t=this.start();this._status=t?r.default.IN_PROGRESS:r.default.FAILED;if(!t){this._stop()}return t}else{this._status=r.default.IN_PROGRESS;return true}}_stop(){if(this._decorators.length){this._decorators.forEach(function(t){if(t._status===r.default.IN_PROGRESS){t._stop()}})}if(this._status===r.default.IN_PROGRESS){this._status=r.default.INTERRUPTED;this.stop()}}_update(){var t=0;var e;if(this.waitDecoratorsLength>0){for(t=0;t<this.waitDecorators.length;t++){if(this.waitDecorators[t]){e=this.waitDecorators[t]._update(this._status);if(e!==r.default.WAIT){this.waitDecoratorsLength--;this.waitDecorators[t]=null}}}if(this.waitDecoratorsLength===0){var i=this.start();this._status=i?r.default.IN_PROGRESS:r.default.FAILED;if(!i){this._stop()}}else{return r.default.IN_PROGRESS}}if(this._status===r.default.PAUSED){e=this._status;if(this._decorators.length){for(t=0;t<this._decorators.length;t++){e=this._decorators[t]._update(this._status);if(e!==r.default.IN_PROGRESS){this._stop();return e}}}return this._status}else if(this._status===r.default.IN_PROGRESS){var n=this.update();if(n!==r.default.IN_PROGRESS){this._status=n;this._stop()}if(this._decorators.length){for(t=0;t<this._decorators.length;t++){n=this._decorators[t]._update(this._status);if(n!==r.default.IN_PROGRESS){this._stop();this._status=n;return this._status}}}return this._status}else if(this._status===r.default.SUCCEEDED){return r.default.SUCCEEDED}else{return r.default.FAILED}}}i["default"]=a},{"./BaseElement":2,"./Status":10}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("events");class s extends n.EventEmitter{constructor(){super()}}i["default"]=s},{events:void 0}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});class n{constructor(t,e,i,n,s){this.root=t;this.blackboard=e;this.notepad=i;this.result=n;this.emitter=s}get status(){return this.root._status}start(){return this.root._start()}stop(){this.root._stop()}pause(){this.root._pause()}unpause(){this.root._unpause()}update(){return this.root._update()}}i["default"]=n},{}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});class n{}i["default"]=n},{}],7:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("./Status"),r=n(s),o=t("./BaseElement"),u=n(o);class a extends u.default{constructor(t,e){super(t,e);this.behavior=null}update(){throw new Error("Decorator sub-class must override update()")}_start(){var t=this.start();this._status=t?r.default.IN_PROGRESS:r.default.FAILED;return t}_stop(){this._status=r.default.INTERRUPTED;this.stop()}_update(t){this._status=this.update(t);return this._status}}i["default"]=a},{"./BaseElement":2,"./Status":10}],8:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("path"),r=n(s),o=t("callsite"),u=n(o),a=t("./BehaviorEmitter"),c=n(a),l=t("./Blackboard"),f=n(l),d=t("./BehaviorTree"),h=n(d);class p{constructor(t){this._behaviors={};this.blackboard=new f.default;Object.assign(this,t);this.registerCore()}register(t,e,i){let n=this._behaviors[e];if(!n){n=this._behaviors[e]={}}n[t]=i}registerCore(){const t="core";const e=Object.assign({},this.behaviors,this.decorators);for(let i in e){this.register(i,t,e[i])}}create(e){let i=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];let n;e=e.substr(0,e.lastIndexOf(r.default.parse(e).ext));if(!r.default.isAbsolute(e)){let s=(0,u.default)()[1].getFileName();n=r.default.join(s,"..",e)}else{n=e}let o;try{o=t(n)}catch(a){console.error(a);throw new Error(e+" is not a valid behavior tree")}let l=i.blackboard||this.blackboard;let f=i.notepad||{};let d={};let p=new c.default;let S=o(l,f,d,p);let _={};let v,m,b,E;let g=Object.keys(S);let R="",y;for(v=0;v<g.length;v++){E=g[v];b=S[E];R=b["asset-pack"]||"core";if(R=="project"&&i.assetPack){R=i.assetPack}y=this._behaviors[R];if(!y){throw new Error("Namespace '"+R+"' is not registered with the behavior factory")}else if(!y[b.class]){throw new Error("Behavior '"+b.class+"' in namespace '"+R+"' is not registered with the behavior factory")}else if(Array.isArray(b.args)){throw new Error("Behavior '"+b.class+"' options are invalid, re-run behaviorify")}let O=y[b.class];let P=Object.assign({name:b.name,emitter:p,blackboard:l,assetPack:i.assetPack||""},b.options||{});_[E]=new O(P)}let k={};for(v=0;v<g.length;v++){E=g[v];b=S[E];if(!b.parent){k[b.id]=true}if(b.skipped){delete k[b.id];continue}let I=_[b.id];if(b.children){let D=[];for(m=0;m<b.children.length;m++){let T=b.children[m];let A=_[T];if(!S[T].skipped){D.push(A)}}I.children=D}if(b.decorators){let w=[];for(m=0;m<b.decorators.length;m++){let M=_[b.decorators[m]];delete k[b.decorators[m]];if(!S[b.decorators[m]].skipped){w.push(M)}}if(w.length>0){I.decorators=w}}}let N=_[Object.keys(k)[0]];return new h.default(N,this.blackboard,f,d,p)}}i["default"]=p},{"./BehaviorEmitter":4,"./BehaviorTree":5,"./Blackboard":6,callsite:void 0,path:void 0}],9:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("./Status"),r=n(s),o=t("./Behavior"),u=n(o);class a extends u.default{constructor(t,e){super(t,Object.assign({children:[]},e||{}));this.children=this.options.children}get children(){return this._children}set children(t){for(var e=0;e<t.length;e++){t.parent=this}this._children=t}_stop(){if(this.children.length){this.children.forEach(function(t){if(t._status===r.default.IN_PROGRESS){t._stop()}})}super._stop()}}i["default"]=a},{"./Behavior":3,"./Status":10}],10:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const n={SUCCEEDED:"SUCCEEDED",FAILED:"FAILED",INTERRUPTED:"INTERRUPTED",IN_PROGRESS:"IN_PROGRESS",INVALID:"INVALID",PAUSED:"PAUSED",WAIT:"WAIT"};i["default"]=n},{}],11:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Behavior"),r=n(s),o=t("../Status"),u=n(o),a=t("../../Runtime"),c=n(a);class l extends r.default{start(){c.default.instance.animate.blink();return true}update(){return u.default.SUCCEEDED}}i["default"]=l},{"../../Runtime":1,"../Behavior":3,"../Status":10}],12:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Behavior"),r=n(s),o=t("../Status"),u=n(o);class a extends r.default{start(){this.options.exec();return true}update(){return u.default.SUCCEEDED}}i["default"]=a},{"../Behavior":3,"../Status":10}],13:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Behavior"),r=n(s),o=t("../Status"),u=n(o);class a extends r.default{constructor(t){super(t);this.status=u.default.INVALID}start(){this.status=u.default.IN_PROGRESS;this.options.exec(this.onSucceed.bind(this),this.onFail.bind(this));return true}onSucceed(){this.status=u.default.SUCCEEDED}onFail(){this.status=u.default.FAILED}update(){return this.status}}i["default"]=a},{"../Behavior":3,"../Status":10}],14:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Behavior"),r=n(s),o=t("./Null"),u=n(o),a=t("../decorators/SucceedOnListen"),c=n(a);class l extends r.default{constructor(t){super(t);let e=new c.default({getOptions:t.getOptions,rule:t.rule,onResult:t.onResult,emitter:this.emitter,blackboard:this.blackboard,assetPack:this.assetPack});this.behavior=new u.default({decorators:[e]})}start(){return this.behavior._start()}stop(){this.behavior._stop()}update(){return this.behavior._update()}}i["default"]=l},{"../Behavior":3,"../decorators/SucceedOnListen":41,"./Null":18}],15:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Behavior"),r=n(s),o=t("../decorators/SucceedOnEmbedded"),u=n(o),a=t("./Null"),c=n(a);class l extends r.default{constructor(t){super(t);let e=new u.default({rule:this.options.rule,onResult:this.options.onResult,emitter:this.emitter,blackboard:this.blackboard,assetPack:this.assetPack});this.behavior=new c.default({decorators:[e]})}start(){return this.behavior._start()}stop(){this.behavior._stop()}update(){return this.behavior._update()}}l.Rules={HEY_jibo:"hey_jibo"},i["default"]=l},{"../Behavior":3,"../decorators/SucceedOnEmbedded":39,"./Null":18}],16:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Behavior"),r=n(s),o=t("../decorators/SucceedOnListenJs"),u=n(o),a=t("./Null"),c=n(a);class l extends r.default{constructor(t){super(t);let e=new u.default({getOptions:t.getOptions,getRule:t.getRule,onResult:t.onResult,emitter:this.emitter,blackboard:this.blackboard,assetPack:this.assetPack});this.behavior=new c.default({decorators:[e]})}start(){return this.behavior._start()}stop(){this.behavior._stop()}update(){return this.behavior._update()}}i["default"]=l},{"../Behavior":3,"../decorators/SucceedOnListenJs":42,"./Null":18}],17:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Behavior"),r=n(s),o=t("../Status"),u=n(o),a=t("../../Runtime"),c=n(a),l=t("animation-utilities");class f extends r.default{constructor(t){super(t,{isContinuous:false});this.threeVec=new l.THREE.Vector3(0,0,0);this.status=u.default.INVALID}start(){this.status=u.default.IN_PROGRESS;this.builder=c.default.instance.animate.createLookatBuilder();this.onStoppedBind=this.onStopped.bind(this);this.builder.on("STOPPED",this.onStoppedBind);this.builder.setContinuousMode(this.options.isContinuous);if(this.options.config!==undefined){this.options.config(this.builder)}let t=this.options.getTarget();this.threeVec.set(t.x,t.y,t.z);this.lookAtInstance=this.builder.startLookat(this.threeVec);return true}onStopped(){this.status=u.default.SUCCEEDED}stop(){if(this.lookAtInstance){this.lookAtInstance.stop()}}update(){if(this.options.isContinuous&&this.lookAtInstance!==undefined){let t=this.options.getTarget();this.threeVec.set(t.x,t.y,t.z);this.lookAtInstance.updateTarget(this.threeVec)}return this.status}}i["default"]=f},{"../../Runtime":1,"../Behavior":3,"../Status":10,"animation-utilities":void 0}],18:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Behavior"),r=n(s),o=t("../Status"),u=n(o);class a extends r.default{update(){return u.default.IN_PROGRESS}}i["default"]=a},{"../Behavior":3,"../Status":10}],19:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../ParentBehavior"),r=n(s),o=t("../Status"),u=n(o);class a extends r.default{start(){if(this.children.length===0){return false}var t=false;this.runChildren=[];for(let e=0;e<this.children.length;e++){var i=this.children[e];if(i._start()){this.runChildren.push(i)}else{t=true}}this.activeChildren=this.runChildren.length;if(t){for(let e=0;e<this.runChildren.length;e++){this.runChildren[e]._stop()}return false}return true}stop(){for(var t=0;t<this.runChildren.length;t++){if(!this.runChildren[t])continue;this.runChildren[t]._stop()}}update(){var t=false;for(var e=0;e<this.runChildren.length;e++){if(!this.runChildren[e])continue;var i=this.runChildren[e];var n=i._update();if(n===u.default.SUCCEEDED){if(this.options.succeedOnOne){this._stop();return u.default.SUCCEEDED}else{i._stop();delete this.runChildren[e];this.activeChildren--}}else if(n===u.default.FAILED){t=true}else if(n===u.default.PAUSED){return u.default.IN_PROGRESS}}if(t){return u.default.FAILED}else if(this.activeChildren===0){return u.default.SUCCEEDED}else{return u.default.IN_PROGRESS}}}i["default"]=a},{"../ParentBehavior":9,"../Status":10}],20:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Behavior"),r=n(s),o=t("../Status"),u=n(o),a=t("../../Runtime"),c=n(a),l=t("../../utils/PathUtils"),f=n(l);class d extends r.default{constructor(t){super(t);this.options.animPath=f.default.setDefaultPath("animations",t.animPath);this.builder=null;this.onEvent=this.onEvent.bind(this);this.status=u.default.INVALID}start(){var t=this;this.status=u.default.IN_PROGRESS;f.default.getAssetUri(this.options.animPath,this.assetPack,function(e,i){c.default.instance.animate.createAnimationBuilderFromKeysPath(e,i,function(e){t.builder=e;if(!t.builder){t.status=u.default.FAILED}else{e.on("STOPPED",function(){t.status=u.default.SUCCEEDED});e.on("EVENT",t.onEvent);if(t.options.config){t.options.config(e)}t.instance=e.play()}})});return true}stop(){if(!this.builder){return}this.builder.off("EVENT",this.onEvent);this.instance.stop()}onEvent(t,e,i){c.default.instance.behaviorEmitter.emit(i.eventName,e,i.payload)}update(){return this.status}}i["default"]=d},{"../../Runtime":1,"../../utils/PathUtils":70,"../Behavior":3,"../Status":10}],21:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Behavior"),r=n(s),o=t("../Status"),u=n(o),a=t("../../utils/AudioUtils"),c=n(a);class l extends r.default{constructor(t){super(t);this.status=u.default.INVALID}start(){this.status=u.default.IN_PROGRESS;this.audio=c.default.startAudio(c.default.getPath(this.options.audioPath),this.assetPack,this.onAudioStopped.bind(this));return true}onAudioStopped(){this.status=u.default.SUCCEEDED}stop(){this.audio.pause()}update(){return this.status}}i["default"]=l},{"../../utils/AudioUtils":69,"../Behavior":3,"../Status":10}],22:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../ParentBehavior"),r=n(s),o=t("../Status"),u=n(o);class a extends r.default{constructor(t){super(t);this.current=-1}start(){if(this.children.length===0){return false}this.current=Math.round(Math.random()*(this.children.length-1));var t=this.children[this.current]._start();this.current=t?this.current:-1;return t}stop(){if(this.current!==-1&&this.current<this.children.length){this.children[this.current]._stop();this.current=-1}}update(){var t=this.children[this.current]._update();if(t===u.default.PAUSED){return u.default.IN_PROGRESS}return t}}i["default"]=a},{"../ParentBehavior":9,"../Status":10}],23:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Behavior"),r=n(s),o=t("../Status"),u=n(o),a=t("../../Runtime"),c=n(a);class l extends r.default{constructor(t){super(t);this.status=u.default.INVALID}start(){var t=this;this.status=u.default.IN_PROGRESS;c.default.instance.lps.readBarcode(function(e,i){t.options.onBarcode(e,i);t.status=u.default.SUCCEEDED});return true}update(){return this.status}}i["default"]=l},{"../../Runtime":1,"../Behavior":3,"../Status":10}],24:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../ParentBehavior"),r=n(s),o=t("../Status"),u=n(o);class a extends r.default{constructor(t){super(t);this.current=-1}start(){if(this.children.length===0){return true}this.current=0;var t=this.children[this.current]._start();this.current=t?this.current:-1;return t}stop(){if(this.current!==-1&&this.current<this.children.length){this.current=-1}}update(){if(this.children.length===0||this.status===u.default.SUCCEEDED){return u.default.SUCCEEDED}while(this.current!==-1&&this.current<this.children.length){var t=this.children[this.current]._update();if(t===u.default.SUCCEEDED){this.current++;if(this.current<this.children.length){var e=this.children[this.current]._start();if(!e){return u.default.FAILED}}else{return u.default.SUCCEEDED}}else if(t===u.default.IN_PROGRESS||t==u.default.PAUSED){return u.default.IN_PROGRESS}else{return u.default.FAILED}}return u.default.SUCCEEDED}}i["default"]=a},{"../ParentBehavior":9,"../Status":10}],25:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Behavior"),r=n(s),o=t("../Status"),u=n(o),a=t("../../Runtime"),c=n(a),l=t("../../utils/PathUtils"),f=n(l);class d extends r.default{constructor(t){super(t);if(t.behaviorPath){this.behaviorPath=t.behaviorPath}this.status=u.default.INVALID;this.root=null}set behaviorPath(t){this.options.behaviorPath=f.default.setDefaultPath("behaviors",t);this.assetPack=f.default.getAssetPack(t)}start(){var t=this;this.status=u.default.IN_PROGRESS;f.default.getAssetUri(this.options.behaviorPath,this.assetPack,function(e){t.root=c.default.instance.bt.create(e,{notepad:t.options.getNotepad(),blackboard:t.blackboard,assetPack:t.assetPack});t.status=t.root.start()?t.status:u.default.FAILED});return true}stop(){if(this.root){this.root.stop();this.root=null}}update(){if(this.status===u.default.FAILED){if(this.root){this.root.stop()}return this.status}if(!this.root){return this.status}let t=this.root.update();if(t===u.default.FAILED){console.trace()}if(t===u.default.SUCCEEDED){this.options.onResult(this.root.result)}return t}}i["default"]=d},{"../../Runtime":1,"../../utils/PathUtils":70,"../Behavior":3,"../Status":10}],26:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Behavior"),r=n(s),o=t("./Subtree"),u=n(o);class a extends r.default{constructor(t){super(t);this.subtree=new u.default({name:this.name,getNotepad:t.getNotepad,onResult:t.onResult,blackboard:this.blackboard,emitter:this.emitter,assetPack:this.assetPack})}start(){var t=this;this.options.getFileName(function(e){t.subtree.behaviorPath=e;t.subtree._start()});return true}stop(){this.subtree._stop()}update(){return this.subtree._update()}}i["default"]=a},{"../Behavior":3,"./Subtree":25}],27:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../ParentBehavior"),r=n(s),o=t("../Status"),u=n(o);class a extends r.default{constructor(t){super(t);this.current=-1}start(){if(this.children.length===0){return false}this.current=0;return this.findStart()}findStart(){var t=false;while(!t&&this.current<this.children.length){t=this.children[this.current]._start();if(!t){this.current++}}return true}stop(){this.current=-1}update(){if(this.current!==-1&&this.current<this.children.length){var t=this.children[this.current]._update();if(t===u.default.FAILED){this.current++;if(this.current>=this.children.length||!this.findStart()){return u.default.SUCCEEDED}else{return u.default.IN_PROGRESS}}else if(t===u.default.PAUSED){return u.default.IN_PROGRESS}return t}return u.default.SUCCEEDED}}i["default"]=a},{"../ParentBehavior":9,"../Status":10}],28:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Behavior"),r=n(s),o=t("../Status"),u=n(o),a=t("../../Runtime"),c=n(a);class l extends r.default{constructor(t){super(t,{noDistortion:true});this.status=u.default.INVALID}onPhoto(t,e){this.options.onPhoto(t,e);this.status=u.default.SUCCEEDED}start(){var t=this;this.status=u.default.IN_PROGRESS;c.default.instance.lps.takePhoto(this.options.resolution,this.options.noDistortion,c.default.instance.lps.CameraID.LEFT,c.default.instance.lps.PhotoType.FULL,function(e,i){if(e){t.onPhoto(e,null);t.status=u.default.SUCCEEDED;return}else{t.onPhoto(null,i)}});return true}update(){return this.status}}i["default"]=l},{"../../Runtime":1,"../Behavior":3,"../Status":10}],29:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Behavior"),r=n(s),o=t("../Status"),u=n(o),a=t("../../Runtime"),c=n(a);class l extends r.default{constructor(t){super(t);this.onSpeakingStopped=this.onSpeakingStopped.bind(this);this.status=u.default.INVALID}onSpeakingStopped(){this.status=u.default.SUCCEEDED}set words(t){this.options.words=t}start(){var t=this;const e=c.default.instance.tts;this.status=u.default.IN_PROGRESS;e.speak(this.options.words,function(e){t.status=u.default.SUCCEEDED;if(e){console.log("tts.speak() error: "+e)}});this.cleanup();e.on("word",this.options.onWord);e.on("stopped",this.onSpeakingStopped);return true}cleanup(){const t=c.default.instance.tts;t.removeListener("stopped",this.onSpeakingStopped);t.removeListener("word",this.options.onWord)}stop(){this.cleanup()}update(){if(this.status!==u.default.IN_PROGRESS){this.cleanup()}return this.status}}i["default"]=l},{"../../Runtime":1,"../Behavior":3,"../Status":10}],30:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Behavior"),r=n(s),o=t("./TextToSpeech"),u=n(o);class a extends r.default{constructor(t){super(t);this.behavior=new u.default({emitter:this.emitter,blackboard:this.blackboard,onWord:this.options.onWord,assetPack:this.assetPack})}start(){var t=this;this.options.getWords(function(e){t.behavior.words=e;t.behavior._start()});return true}stop(){this.behavior._stop()}update(){return this.behavior._update()}}i["default"]=a},{"../Behavior":3,"./TextToSpeech":29}],31:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Behavior"),r=n(s),o=t("../Status"),u=n(o),a=t("./Null"),c=n(a),l=t("../decorators/TimeoutSucceed"),f=n(l);class d extends r.default{constructor(t){super(t);let e=new f.default({timeout:t.getTime()});this.behavior=new c.default({decorators:[e]});this.status=u.default.INVALID}start(){this.status=u.default.IN_PROGRESS;return this.behavior._start()}stop(){this.behavior._stop()}update(){this.status=this.behavior._update();return this.status}}i["default"]=d},{"../Behavior":3,"../Status":10,"../decorators/TimeoutSucceed":44,"./Null":18}],32:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("./Blink"),r=n(s),o=t("./ExecuteScript"),u=n(o),a=t("./ExecuteScriptAsync"),c=n(a),l=t("./Listen"),f=n(l),d=t("./ListenEmbedded"),h=n(d),p=t("./ListenJs"),S=n(p),_=t("./LookAt"),v=n(_),m=t("./Null"),b=n(m),E=t("./Parallel"),g=n(E),R=t("./PlayAnimation"),y=n(R),O=t("./PlayAudio"),P=n(O),k=t("./Random"),I=n(k),D=t("./ReadBarcode"),T=n(D),A=t("./Sequence"),w=n(A),M=t("./Subtree"),N=n(M),L=t("./SubtreeJs"),C=n(L),j=t("./Switch"),U=n(j),B=t("./TakePhoto"),G=n(B),J=t("./TextToSpeech"),z=n(J),F=t("./TextToSpeechJs"),W=n(F),V=t("./TimeoutJs"),q=n(V);i["default"]={Blink:r["default"],ExecuteScript:u["default"],ExecuteScriptAsync:c["default"],Listen:f["default"],ListenEmbedded:h["default"],ListenJs:S["default"],LookAt:v["default"],Null:b["default"],Parallel:g["default"],PlayAnimation:y["default"],PlayAudio:P["default"],Random:I["default"],ReadBarcode:T["default"],Sequence:w["default"],Subtree:N["default"],SubtreeJs:C["default"],Switch:U["default"],TakePhoto:G["default"],TextToSpeech:z["default"],TextToSpeechJs:W["default"],TimeoutJs:q["default"]}},{"./Blink":11,"./ExecuteScript":12,"./ExecuteScriptAsync":13,"./Listen":14,"./ListenEmbedded":15,"./ListenJs":16,"./LookAt":17,"./Null":18,"./Parallel":19,"./PlayAnimation":20,"./PlayAudio":21,"./Random":22,"./ReadBarcode":23,"./Sequence":24,"./Subtree":25,"./SubtreeJs":26,"./Switch":27,"./TakePhoto":28,"./TextToSpeech":29,"./TextToSpeechJs":30,"./TimeoutJs":31}],33:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Decorator"),r=n(s);class o extends r.default{start(){return this.options.conditional()}update(t){return t}}i["default"]=o},{"../Decorator":7}],34:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Decorator"),r=n(s),o=t("../Status"),u=n(o);class a extends r.default{constructor(t){super(t,{init:function e(){}})}start(){this.options.init();if(this.options.conditional()){return false}return true}update(t){if(this.options.conditional()){return u.default.FAILED}return t}}i["default"]=a},{"../Decorator":7,"../Status":10}],35:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Decorator"),r=n(s),o=t("../Status"),u=n(o),a=t("../../Runtime"),c=n(a);class l extends r.default{constructor(t){super(t);this.didStart=false;this._onEvent=this._onEvent.bind(this)}start(){this.didStart=false;if(this.options.eventName.length!==0){c.default.instance.behaviorEmitter.on(this.options.eventName,this._onEvent)}return u.default.WAIT}_onEvent(t,e){if(this.options.onReceived){this.options.onReceived(t,e)}this.didStart=true;c.default.instance.behaviorEmitter.removeListener(this.options.eventName,this._onEvent)}stop(){if(this.options.eventName.length!==0){c.default.instance.behaviorEmitter.removeListener(this.options.eventName,this._onEvent)}}update(t){if(this.didStart){return t}else{return u.default.WAIT}}}i["default"]=l},{"../../Runtime":1,"../Decorator":7,"../Status":10}],36:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Decorator"),r=n(s),o=t("../Status"),u=n(o);class a extends r.default{constructor(t){super(t,{init:function e(){}});this.didStart=false}start(){this.options.init();this.didStart=false;if(this.options.conditional()){this.didStart=true;return true}else{return u.default.WAIT;
}}update(t){if(this.didStart){return t}else if(this.options.conditional()){this.didStart=true;return true}else{return u.default.WAIT}}}i["default"]=a},{"../Decorator":7,"../Status":10}],37:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Decorator"),r=n(s),o=t("../Status"),u=n(o);class a extends r.default{constructor(t){super(t);this._onEvent=this._onEvent.bind(this)}start(){this.emitter.once(this.options.eventName,this._onEvent);this.didStart=false;return u.default.WAIT}_onEvent(){this.options.onEvent.apply(null,arguments);this.didStart=true}stop(){this.emitter.removeListener(this.options.eventName,this._onEvent)}update(t){if(this.didStart){return t}else{return u.default.WAIT}}}i["default"]=a},{"../Decorator":7,"../Status":10}],38:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Decorator"),r=n(s),o=t("../Status"),u=n(o);class a extends r.default{constructor(t){super(t,{init:function e(){}})}start(){this.options.init();return true}update(t){if(this.options.conditional()){return u.default.SUCCEEDED}return t}}i["default"]=a},{"../Decorator":7,"../Status":10}],39:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Decorator"),r=n(s),o=t("../Status"),u=n(o),a=t("../../Runtime"),c=n(a);class l extends r.default{constructor(t){super(t);this.status=u.default.INVALID}start(){var t=this;this.status=u.default.IN_PROGRESS;let e=c.default.instance.asr;if(!e.isInitialized){console.warn("Running listen without ASR service");return true}let i={};i.embeddedOnly=true;this.listener=e.createListener(i,this.options.rule);this.listener.start();this.listener.on("embedded",function(e,i){t.emitter.emit("hey-jibo",e,i);t.listener.removeAllListeners();t.status=u.default.SUCCEEDED});this.listener.on("error",function(e){t.emitter.emit("error",e)});this.listener.on("finished",function(){t.listener.removeAllListeners();t.status=u.default.SUCCEEDED});this.options.onResult(this.emitter);this.status=u.default.IN_PROGRESS;return true}stop(){this.emitter.removeAllListeners();this.listener.removeAllListeners()}update(t){if(this.status===u.default.IN_PROGRESS){return t}else{return this.status}}}l.Rules={HEY_jibo:"hey_jibo"},i["default"]=l},{"../../Runtime":1,"../Decorator":7,"../Status":10}],40:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Decorator"),r=n(s),o=t("../Status"),u=n(o);class a extends r.default{constructor(t){super(t);this._onEvent=this._onEvent.bind(this);this.status=u.default.INVALID}start(){this.emitter.once(this.options.eventName,this._onEvent);this.status=u.default.IN_PROGRESS;return true}stop(){this.emitter.removeListener(this.options.eventName,this._onEvent)}_onEvent(){this.options.onEvent.apply(null,arguments);this.status=u.default.SUCCEEDED}update(t){if(this.status===u.default.SUCCEEDED){return u.default.SUCCEEDED}return t}}i["default"]=a},{"../Decorator":7,"../Status":10}],41:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Decorator"),r=n(s),o=t("../Status"),u=n(o),a=t("./SucceedOnListenJs"),c=n(a),l=t("../../utils/PathUtils"),f=n(l),d=t("fs"),h=n(d);class p extends r.default{constructor(t){super(t);this.status=u.default.INVALID;this.options.rule=f.default.setDefaultPath("rules",t.rule)}start(){var t=this;this.status=u.default.IN_PROGRESS;let e=function i(e){f.default.getAssetUri(t.options.rule,t.assetPack,function(t){h.default.readFile(t,"utf8",function(i,n){if(i){console.error("Rule file does not exist: "+t)}e(n)})})};this.decorator=new c.default({getOptions:this.options.getOptions,getRule:e,onResult:this.options.onResult,emitter:this.emitter,blackboard:this.blackboard,assetPack:this.assetPack});return this.decorator._start()}stop(){if(this.decorator){this.decorator._stop()}this.decorator=undefined}update(t){if(this.decorator){let e=this.decorator._update(t);if(e===u.default.SUCCEEDED){this.decorator=undefined}return e}return this.status}}i["default"]=p},{"../../utils/PathUtils":70,"../Decorator":7,"../Status":10,"./SucceedOnListenJs":42,fs:void 0}],42:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Decorator"),r=n(s),o=t("../Status"),u=n(o),a=t("events"),c=t("../../Runtime"),l=n(c);class f extends r.default{constructor(t){super(t);this.status=u.default.INVALID}start(){var t=this;this.starting=true;let e=this.options.getOptions();let i=l.default.instance.asr;this.status=u.default.IN_PROGRESS;if(!i.isInitialized){console.warn("Running listen without ASR service");return true}this.emitter=new a.EventEmitter;this.options.getRule(function(n){t.listener=i.createListener(e,n);t.listener.start();t.listener.on("cloud",function(e,i){t.emitter.emit("cloud",e,i)});t.listener.on("incremental",function(e){t.emitter.emit("incremental",e,function(){t.listener.stop()})});t.listener.on("embedded",function(e,i){t.emitter.emit("hey-jibo",e,i)});t.listener.on("end",function(){t.emitter.emit("end")});t.listener.on("error",function(e){t.emitter.emit("error",e)});t.listener.on("finished",function(){t.listener.removeAllListeners();t.status=u.default.SUCCEEDED});t.options.onResult(t.emitter);t.status=u.default.IN_PROGRESS;t.starting=false});return true}stop(){if(!this.starting){if(this.emitter){this.emitter.removeAllListeners();this.emitter=undefined}if(this.listener){this.listener.removeAllListeners();this.listener.action.stop();this.listener.action.clear();this.listener=undefined}}}update(t){if(this.status===u.default.IN_PROGRESS){return t}else{return this.status}}}i["default"]=f},{"../../Runtime":1,"../Decorator":7,"../Status":10,events:void 0}],43:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Decorator"),r=n(s),o=t("../Status"),u=n(o);class a extends r.default{start(){this.startTime=(new Date).getTime();return true}update(t){var e=(new Date).getTime()-this.startTime;if(e>this.options.timeout){this.behavior._stop();return u.default.FAILED}return t}}i["default"]=a},{"../Decorator":7,"../Status":10}],44:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Decorator"),r=n(s),o=t("../Status"),u=n(o);class a extends r.default{start(){this.startTime=(new Date).getTime();return true}update(t){var e=(new Date).getTime()-this.startTime;if(e>this.options.timeout){return u.default.SUCCEEDED}return t}}i["default"]=a},{"../Decorator":7,"../Status":10}],45:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Decorator"),r=n(s),o=t("../Status"),u=n(o);class a extends r.default{start(){this.startTime=(new Date).getTime();this.timeout=this.options.getTime();return true}update(t){var e=(new Date).getTime()-this.startTime;if(e>this.timeout){return u.default.SUCCEEDED}return t}}i["default"]=a},{"../Decorator":7,"../Status":10}],46:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("../Decorator"),r=n(s),o=t("../Status"),u=n(o);class a extends r.default{constructor(t){super(t,{init:function e(){}});this.doInit=true}start(){if(this.doInit){this.options.init();this.doInit=false}return true}update(t){if(t===u.default.SUCCEEDED&&this.options.conditional()){return this.behavior._start()?u.default.IN_PROGRESS:u.default.FAILED}this.doInit=t!==u.default.IN_PROGRESS;return t}}i["default"]=a},{"../Decorator":7,"../Status":10}],47:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("./Case"),r=n(s),o=t("./FailOnCondition"),u=n(o),a=t("./StartOnAnimEvent"),c=n(a),l=t("./StartOnCondition"),f=n(l),d=t("./StartOnEvent"),h=n(d),p=t("./SucceedOnCondition"),S=n(p),_=t("./SucceedOnEmbedded"),v=n(_),m=t("./SucceedOnEvent"),b=n(m),E=t("./SucceedOnListen"),g=n(E),R=t("./SucceedOnListenJs"),y=n(R),O=t("./TimeoutFail"),P=n(O),k=t("./TimeoutSucceed"),I=n(k),D=t("./TimeoutSucceedJs"),T=n(D),A=t("./WhileCondition"),w=n(A);i["default"]={Case:r["default"],FailOnCondition:u["default"],StartOnAnimEvent:c["default"],StartOnCondition:f["default"],StartOnEvent:h["default"],SucceedOnCondition:S["default"],SucceedOnEmbedded:v["default"],SucceedOnEvent:b["default"],SucceedOnListen:g["default"],SucceedOnListenJs:y["default"],TimeoutFail:P["default"],TimeoutSucceed:I["default"],TimeoutSucceedJs:T["default"],WhileCondition:w["default"]}},{"./Case":33,"./FailOnCondition":34,"./StartOnAnimEvent":35,"./StartOnCondition":36,"./StartOnEvent":37,"./SucceedOnCondition":38,"./SucceedOnEmbedded":39,"./SucceedOnEvent":40,"./SucceedOnListen":41,"./SucceedOnListenJs":42,"./TimeoutFail":43,"./TimeoutSucceed":44,"./TimeoutSucceedJs":45,"./WhileCondition":46}],48:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("./Status"),r=n(s),o=t("./Factory"),u=n(o),a=t("./Blackboard"),c=n(a),l=t("./BehaviorTree"),f=n(l),d=t("./BehaviorEmitter"),h=n(d),p=t("./Behavior"),S=n(p),_=t("./ParentBehavior"),v=n(_),m=t("./BaseElement"),b=n(m),E=t("./Decorator"),g=n(E),R=t("./behaviors"),y=n(R),O=t("./decorators"),P=n(O);i["default"]={behaviors:y["default"],decorators:P["default"],Status:r["default"],Factory:u["default"],Blackboard:c["default"],BehaviorTree:f["default"],BehaviorEmitter:h["default"],Behavior:S["default"],BaseElement:b["default"],ParentBehavior:v["default"],Decorator:g["default"]}},{"./BaseElement":2,"./Behavior":3,"./BehaviorEmitter":4,"./BehaviorTree":5,"./Blackboard":6,"./Decorator":7,"./Factory":8,"./ParentBehavior":9,"./Status":10,"./behaviors":32,"./decorators":47}],49:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0}),i["default"]=function(t){function e(t){t=Object.assign({constructor:function(){},start:function(){return!0},update:function(){this.status},stop:function(){}},t);class e extends s{constructor(e){super();for(let i in t){if(i=="constructor")continue;if(typeof t[i]=="function")this[i]=t[i]}t.constructor.call(this,e)}}return e}function i(t){t=Object.assign({constructor:function(){},start:function(){return!0},update:function(t){return t},stop:function(){}},t);class e extends o{constructor(e){super();for(let i in t){if(i=="constructor")continue;if(i=="name")continue;if(i=="namespace")continue;this[i]=t[i]}t.constructor.call(this,e)}}return e}let n=t.bt.Factory,s=t.bt.Behavior,o=t.bt.Decorator;GLOBAL.JIBO={},Object.defineProperty(GLOBAL.JIBO,"bt",{get:function(){return t.bt}}),Object.defineProperties(t.services,{TtsService:{get:function(){return t.services.TTSService}},NluService:{get:function(){return t.services.NLUService}},NonMotionBodyService:{get:function(){return t.services.BodyService}},LpsService:{get:function(){return t.services.LPSService}}}),Object.defineProperties(t.services.asr,{AsrService:{get:function(){return t.services.asr.ASRService}}}),Object.defineProperty(t.Runtime.prototype,"bodySettings",{get:function(){return this.body}}),Object.defineProperty(n.prototype,"factory",{get:function(){return this}}),n.prototype.addBehavior=function(t,e){e=e||"";let i=(0,u["default"])(r["default"].parse(t.filename).name);this.register(i,e,t.exports)},n.prototype.createBehavior=function(t){return e(t)},n.prototype.createDecorator=function(t){return i(t)},n.prototype.registerBehavior=function(t){let i=t.name,n=t.namespace,s=e(t);return this.register(i,n,s),s},n.prototype.registerDecorator=function(t){let e=t.name,n=t.namespace,s=i(t);return this.register(e,n,s),s},s.prototype.setDecorators=function(t){return this.decorators=t,this},s.prototype.getName=function(){return this.name},s.prototype.setChildren=function(t){this.children=t},t.services.LPSService.prototype.getMotionData=function(){return this.lps.motionData}};var s=t("path"),r=n(s),o=t("pascal-case"),u=n(o)},{"pascal-case":void 0,path:void 0}],50:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("async"),r=n(s);class o{constructor(){this.bs={};this.bs.miscState={ts:[],main_board_temp:0,cpu_temp:0,intake_temp:0,exhaust_temp:0,neck_motor_temp:0,torso_motor_temp:0,pelvis_motor_temp:0};this.bs.touchState={ts:[],touched:false,pad_state:[0,0,0,0,0,0],changed:[0,0,0,0,0,0]};this.bs.powerState={ts:[],source:"",vsys:0,battery:{id:0,cycles:0,capacity:0,max_capacity:0,charge_rate:0,temp:0}}}init(t,e){this.httpInterface="http://"+t.host+":"+t.port;this.socketUrl="ws:"+t.host+":"+t.port;r.default.parallel([this.createMiscSocket.bind(this),this.createTouchSocket.bind(this),this.createPowerSocket.bind(this)],e)}getBatteryTemperature(){return this.bs.powerState.battery.temp}getBatteryLevel(){return this.bs.powerState.battery.capacity/this.bs.powerState.battery.max_capacity*100}getSystemVoltage(){return this.bs.powerState.vsys}isBatteryCharging(){return this.bs.powerState.source==="EXTERNAL"}getMainBoardTemperature(){return this.bs.miscState.main_board_temp}getCPUTemperature(){return this.bs.miscState.cpu_temp}getTouchState(){return this.bs.touchState}getFanSpeed(t){this._getSystemSetting("fan_speed",t)}getBacklight(t){this._getSystemSetting("lcd_backlight",t)}_getSystemSetting(t,e){if(this.httpInterface===undefined){e("Body Service is not available",null);return}let i=new XMLHttpRequest;i.open("GET",this.httpInterface+"/settings",true);i.onreadystatechange=function(){if(i.readyState==4&&i.status==200){if(i.response){let n=JSON.parse(i.response);e(null,n[t])}else{e("No data received from body service",null)}}else if(i.readyState==4&&i.status==404){e("Body service is unavailable",null)}};i.send()}setBacklight(t,e){var i=this;if(t<0||t>1){let n="Backlight brightness value of "+t+" is out of range [0.0 - 1.0].";e(n);return}this.getFanSpeed(function(n,s){if(n){e(n)}else{let r={lcd_backlight:t,fan_speed:s};let o=new XMLHttpRequest;let u=i.httpInterface+"/settings";o.open("POST",u,true);o.onreadystatechange=function(){if(o.readyState==4){if(o.status==204){e(null)}else if(o.status==404){e("Body service is unavailable")}else if(o.status===400){e("Bad request sent to "+u)}}};o.send(JSON.stringify(r))}})}createMiscSocket(t){var e=this;this.MiscSocket=new WebSocket(this.socketUrl+"/misc");this.MiscSocket.onerror=function(){console.error(`Error opening misc state socket at ${e.socketUrl}/misc`)};this.MiscSocket.onmessage=function(t){e.bs.miscState=JSON.parse(t.data)};t()}createTouchSocket(t){var e=this;this.TouchSocket=new WebSocket(this.socketUrl+"/touch");this.TouchSocket.onerror=function(){console.error(`Error opening touch state socket at ${e.socketUrl}/touch`)};this.TouchSocket.onmessage=function(t){e.bs.touchState=JSON.parse(t.data)};t()}createPowerSocket(t){var e=this;this.PowerSocket=new WebSocket(this.socketUrl+"/power");this.PowerSocket.onerror=function(){console.error(`Error opening power state socket at ${e.socketUrl}/power`)};this.PowerSocket.onmessage=function(t){e.bs.powerState=JSON.parse(t.data)};t()}}i["default"]=o},{async:void 0}],51:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("async"),r=n(s);let o={DEBUG:0,PREVIEW:1,FULL:2},u={LEFT:0,RIGHT:1},a={SMALL:1,MEDIUM:2,LARGE:3,XLARGE:4},c=[{width:672,height:380},{width:1280,height:720},{width:1920,height:1080},{width:2688,height:1520}];class l{constructor(){this.lps={};this.lps.motionData={cameras:[],entities:[]};this.lps.audioData={entities:[]};this.PhotoType=o;this.PhotoRes=a;this.CameraID=u}get motionData(){return this.lps.motionData}getClosestVisualEntity(){let t;if(this.lps.motionData!==undefined&&this.lps.motionData.entities!==undefined&&this.lps.motionData.entities.length>0){t=this.lps.motionData.entities[0]}return t}getVisualEntityById(t){let e;for(let i=0;i<this.lps.motionData.entities.length;i++){let n=this.lps.motionData.entities[i];if(n&&n.id===t){e=n;break}}return e}getClosestAudibleEntity(){let t;if(this.lps.audioData!==undefined&&this.lps.audioData.entities!==undefined&&this.lps.audioData.entities.length>0){t=this.lps.audioData.entities[0]}return t}getAudibleEntityById(t){let e;for(let i=0;i<this.lps.audioData.entities.length;i++){let n=this.lps.audioData.entities[i];if(n&&n.id===t){e=n;break}}return e}readBarcode(t){if(this.httpUrl===undefined){t("Barcode service is not initialized",null);return}let e=new XMLHttpRequest;e.open("GET",this.httpUrl+"/barcode",true);e.onreadystatechange=function(){if(e.readyState==4&&e.status==200){if(e.response){let i=JSON.parse(e.response);t(null,i.barcodes)}else{t("No data received from barcode service",null)}}else if(e.readyState==4&&e.status==404){t("Barcode service is unavailable",null)}};e.send()}takePhoto(t,e,i,n,s){var r=this;if(this.httpUrl===undefined){s("Photo service is not initialized",null);return}if(t!==this.PhotoRes.MEDIUM){t=this.PhotoRes.MEDIUM}let o=c[t-1].width;let u=c[t-1].height;if(i!==this.CameraID.LEFT){i=this.CameraID.LEFT}if(n<this.PhotoType.DEBUG||n>this.PhotoType.FULL){n=this.PhotoType.FULL}let a={camera:i,width:o,height:u,type:n,undistort:e};let l=this.httpUrl+"/photo";{let f=new XMLHttpRequest;f.open("POST",l,true);f.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");f.setRequestHeader("Accept","*/*");f.onreadystatechange=function(){if(f.readyState==4){if(f.status===200){if(f.response){let t=JSON.parse(f.response);r._getPhoto(t.id,s)}else{s("No data received from photo service",null)}}else{let e="Photo service unavailable";if(f.statusText!==undefined){e=f.statusText}s(e,null)}}};f.send(JSON.stringify(a))}}_getPhoto(t,e){let i=this.httpUrl+"/photo?id="+t;e(null,i)}init(t,e){this.lpsServiceUrl="ws:"+t.host+":"+t.port;this.httpUrl="http://"+t.host+":"+t.port;r.default.parallel([this._createMotionSocket.bind(this),this._createAudioSocket.bind(this)],e)}_createMotionSocket(t){var e=this;this.motionSocket=new WebSocket(this.lpsServiceUrl+"/visual_awareness");this.motionSocket.onerror=function(){console.error(`Error opening visual awareness socket at ${e.lpsServiceUrl}/visual_awareness`)};this.motionSocket.onmessage=function(t){e.lps.motionData=JSON.parse(t.data)};t()}_createAudioSocket(t){var e=this;this.audioSocket=new WebSocket(this.lpsServiceUrl+"/audible_awareness");this.audioSocket.onerror=function(){console.error(`Error opening audible awareness socket at ${e.lpsServiceUrl}/audible_awareness`)};this.audioSocket.onmessage=function(t){e.lps.audioData=JSON.parse(t.data)};t()}}i["default"]=l},{async:void 0}],52:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("events");class s extends n.EventEmitter{constructor(){super()}init(t,e){this.httpInterface="http://"+t.host+":"+t.port;this.loggingEnabled=false;e()}compile(t,e,i){var n=this;let s={REQ_TYPE:"COMPILE",REQ_CONTENT:{RULE_STRING:t}};if(i){s.REQ_CONTENT.URI="handle:"+i}let r=new XMLHttpRequest;s=JSON.stringify(s);r.open("POST",this.httpInterface+"/nlu_interface",true);r.onreadystatechange=function(){if(r.readyState==4&&r.status==200){let t=JSON.parse(r.response);if(n.loggingEnabled){console.log("request.response");console.log(r.response)}if(t.Status==="OK"){let i=t.URI;e(null,i)}else if(t.Status==="ERROR"){e(t.Message)}}else if(r.readyState==4&&r.status===0){e("NLU Service is unavailable")}};if(this.loggingEnabled){console.log("body");console.log(s)}r.send(s)}parseFromRule(t,e,i,n){var s=this;e=e.toLowerCase();let r={REQ_TYPE:"PARSE_FROM_TEXT",REQ_CONTENT:{RULE_STRING:t,TXT_STRING:e},MESSAGE_ID:n};let o=new XMLHttpRequest;r=JSON.stringify(r);o.open("POST",this.httpInterface+"/nlu_interface",true);o.onreadystatechange=function(){if(o.readyState==4&&o.status==200){let t=JSON.parse(o.response);if(s.loggingEnabled){console.log("request.response");console.log(o.response)}if(t.Status==="OK"){let n=t.Result.length>0?t.Result[0]:{Input:e};i(null,n)}else if(t.Status==="ERROR"){i(t.Message)}}else if(o.readyState==4&&o.status===0){i("NLU Service is unavailable")}};if(this.loggingEnabled){console.log("body");console.log(r)}o.send(r)}parseFromURI(t,e,i,n){var s=this;e=e.toLowerCase();let r={REQ_TYPE:"PARSE_FROM_URI",REQ_CONTENT:{URI:t,TXT_STRING:e},MESSAGE_ID:n};let o=new XMLHttpRequest;r=JSON.stringify(r);o.open("POST",this.httpInterface+"/nlu_interface",true);o.onreadystatechange=function(){if(o.readyState==4&&o.status==200){let t=JSON.parse(o.response);if(s.loggingEnabled){console.log("request.response");console.log(o.response)}if(t.Status==="OK"){let n=t.Result.length>0?t.Result[0]:{Input:e};i(null,n)}else if(t.Status==="ERROR"){i(t.Message)}}else if(o.readyState==4&&o.status===0){i("NLU Service is unavailable")}};if(this.loggingEnabled){console.log("body");console.log(r)}o.send(r)}setLogging(t){this.loggingEnabled=t}parseFromFile(){}}i["default"]=s},{events:void 0}],53:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});class n{constructor(){this.token="abcdef"}}i["default"]=n},{}],54:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){function i(t,e){for(var i=new Array(80),n=-1,s=0,r=t.length,o=0;64>o;o++){var u=0;r>o?u=t.charCodeAt(o):e&&(o==r?u=e>>>24&255:o==r+1?u=e>>>16&255:o==r+2?u=e>>>8&255:o==r+3?u=255&e:o==r+4&&(u=128)),0===s&&(n++,i[n]=0,s=32),s-=8,i[n]=i[n]|u<<s}return e&&(i[15]=8*(64+r+4)),i}function n(t,e){for(let i=e<<24|e<<16|e<<8|e,n=0;16>n;n++)t[n]^=i;for(let n,s=[1732584193,4023233417,2562383102,271733878,3285377520],r=s[0],o=s[1],u=s[2],a=s[3],c=s[4],l=16;80>l;l++)n=t[l-3]^t[l-8]^t[l-14]^t[l-16],t[l]=n<<1|n>>>31;for(let l=0;20>l;l++)n=(r<<5|r>>>27)+c+t[l]+1518500249+(o&u|~o&a),c=a,a=u,u=o<<30|o>>>2,o=r,r=4294967295&n;for(let l=20;40>l;l++)n=(r<<5|r>>>27)+c+t[l]+1859775393+(o^u^a),c=a,a=u,u=o<<30|o>>>2,o=r,r=4294967295&n;for(let l=40;60>l;l++)n=(r<<5|r>>>27)+c+t[l]+2400959708+(o&u|o&a|u&a),c=a,a=u,u=o<<30|o>>>2,o=r,r=4294967295&n;for(let l=60;80>l;l++)n=(r<<5|r>>>27)+c+t[l]+3395469782+(o^u^a),c=a,a=u,u=o<<30|o>>>2,o=r,r=4294967295&n;return s[0]=s[0]+r&4294967295,s[1]=s[1]+o&4294967295,s[2]=s[2]+u&4294967295,s[3]=s[3]+a&4294967295,s[4]=s[4]+c&4294967295,s}var s=n(i(t,0),54),r=n(i(t,0),92);for(let o="",u=0;o.length<64;){let a=[0,0,0,0,0];u++;for(let c=i(e,u),l=0;8192>l;l++){for(let f,d=1&l?r:s,h=d[0],p=d[1],S=d[2],_=d[3],v=d[4],m=16;80>m;m++)f=c[m-3]^c[m-8]^c[m-14]^c[m-16],c[m]=f<<1|f>>>31;for(let m=0;20>m;m++)f=(h<<5|h>>>27)+v+c[m]+1518500249+(p&S|~p&_),v=_,_=S,S=p<<30|p>>>2,p=h,h=4294967295&f;for(let m=20;40>m;m++)f=(h<<5|h>>>27)+v+c[m]+1859775393+(p^S^_),v=_,_=S,S=p<<30|p>>>2,p=h,h=4294967295&f;for(let m=40;60>m;m++)f=(h<<5|h>>>27)+v+c[m]+2400959708+(p&S|p&_|S&_),v=_,_=S,S=p<<30|p>>>2,p=h,h=4294967295&f;for(let m=60;80>m;m++)f=(h<<5|h>>>27)+v+c[m]+3395469782+(p^S^_),v=_,_=S,S=p<<30|p>>>2,p=h,h=4294967295&f;if(c[0]=d[0]+h&4294967295,c[1]=d[1]+p&4294967295,c[2]=d[2]+S&4294967295,c[3]=d[3]+_&4294967295,c[4]=d[4]+v&4294967295,1&l)a[0]^=c[0],a[1]^=c[1],a[2]^=c[2],a[3]^=c[3],a[4]^=c[4];else if(0===l){c[5]=2147483648;for(let m=6;15>m;m++)c[m]=0;c[15]=672}}for(var l=0;5>l;l++)for(var m=0;8>m;m++){var f=a[l]>>>28-4*m&15;o+=10>f?f:String.fromCharCode(87+f)}}return o.substring(0,64)}Object.defineProperty(i,"__esModule",{value:!0});var r=t("semver"),o=n(r),u=t("path"),a=n(u),c=t("../utils/PathUtils"),l=n(c);class f{constructor(){}init(e,i){this.httpInterface="http://"+e.host+":"+e.port;this.wifiInterface=this.httpInterface+"/wifi";this.loggingEnabled=false;this.getVersion(function(e,n){if(e){i(e);return}l.default.getBaseDirectory(__dirname,function(e){let s=t(a.default.resolve(e,"package.json")).platform;let r;if(!o.default.satisfies(n,s)){r="Platform version check failed! Skill allows version "+s+" but your current version is "+n+"."}i(r)})})}setLogging(t){this.loggingEnabled=t}wifiStatus(t){this._handleWifiRequest("STATUS-VERBOSE",t)}addNetwork(t){let e="ADD_NETWORK";this._handleWifiRequest(e,t)}setNetwork(t,e,i){var n=this;let r=Object.keys(e);r.forEach(function(r){let o;if(r==="ssid"){o='"'+e[r]+'"';n.ssid=e[r]}else if(r==="password"&&e[r]){if(n.ssid){o=s(e[r],n.ssid);r="psk"}else{i("No ssid to generate psk for WPA-PSK network")}}else{o=e[r]}let u="SET_NETWORK";u+=" "+t;u+=" "+r;u+=" "+o;n._handleWifiRequest(u,i)})}removeNetwork(t,e){this._handleWifiRequest("REMOVE_NETWORK "+t,e)}saveConfig(t){this._handleWifiRequest("SAVE_CONFIG",t)}listNetworks(t){this._handleWifiRequest("LIST_NETWORKS",t)}reassociate(t){this._handleWifiRequest("REASSOCIATE",t)}reconfigure(t){this._handleWifiRequest("RECONFIGURE",t)}disconnect(t){this._handleWifiRequest("DISCONNECT",t)}reconnect(t){this._handleWifiRequest("RECONNECT",t)}disableNetwork(t,e){this._handleWifiRequest("DISABLE_NETWORK "+t,e)}enableNetwork(t,e){this._handleWifiRequest("ENABLE_NETWORK "+t,e)}selectNetwork(t,e){this._handleWifiRequest("SELECT_NETWORK "+t,e)}_handleWifiRequest(t,e){var i=this;let n={command:t};let s=new XMLHttpRequest;n=JSON.stringify(n);s.open("POST",this.wifiInterface,true);s.onreadystatechange=function(){if(s.readyState==4&&s.status==200){let t=JSON.parse(s.response);if(i.loggingEnabled){console.log("response");console.log(t.response)}t=t.response;e(null,t)}else if(s.readyState==4&&s.status===0){e("System Manager is unavailable")}};if(this.loggingEnabled){console.log("body");console.log(n)}s.send(n)}getVersion(t){this.getDisplayVersion(function(e,i){let n=i.trim().match("(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)");t(null,n[0])})}getDisplayVersion(t){var e=this;let i=new XMLHttpRequest;i.open("GET",this.httpInterface+"/version",true);i.onreadystatechange=function(){if(i.readyState==4&&i.status==200){let n=JSON.parse(i.response);if(e.loggingEnabled){console.log("version");console.log(n.version)}let s=n.version;t(null,s)}else if(i.readyState==4&&i.status===0){t("System Manager is unavailable",undefined)}};i.send()}}i["default"]=f},{"../utils/PathUtils":70,path:void 0,semver:void 0}],55:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},r=t("async"),o=n(r),u=t("events");const a={SSML:"ssml",TEXT:"text"},c={TOKENS:"/tts_tokens",PHONES:"/tts_phones",STOP:"/tts_stop",SPEAK:"/tts_speak",TIMING:"/tts_token_times",EFFECTS:"/tts_effects",ANALYSIS:"/tts_analysis"},l={WORD:"word",PHONE:"phone",STOP:"stop",EFFECT:"effect",ANALYSIS:"analysis"},f={START:"START",STOP:"STOP",UPDATE:"UPDATE"},d={prompt:"",locale:"en-us",voice:"griffin",duration_stretch:1,pitch:1,pitchBandwidth:.55,mode:a.TEXT,outputMode:"stream"};class h extends u.EventEmitter{constructor(){super();this.isInitialized=false;this.isTalking=false;this.isStopping=false;this.TTSEvents=l;this.TTSMode=a}static get TTSMode(){return a}static get TTSEvents(){return l}init(t,e){var i=this;if(!t.host||typeof t.host!=="string"){throw new Error(`Missing required service.host`)}this.httpInterface="http://"+t.host+":"+t.port;this.socketUrl="ws:"+t.host+":"+t.port;let n=function s(t){let e=function n(e){i.effectsSocket=e;t()};i.createSocket(c.EFFECTS,"tts sound effects",l.EFFECT)(e)};o.default.parallel([this.createSocket(c.TOKENS,"tts tokens",l.WORD).bind(this),this.createSocket(c.PHONES,"tts phones",l.PHONE).bind(this),this.createSocket(c.ANALYSIS,"tts analysis",l.ANALYSIS).bind(this),n],function(){i.isInitialized=true;e()})}getOptionsAndCallback(t,e){let i={};let n;if(t===undefined&&e===undefined){i={}}else if((typeof t==="undefined"?"undefined":s(t))==="object"&&e===undefined){i=t}else if(typeof t==="function"&&e===undefined){n=t}else if((typeof t==="undefined"?"undefined":s(t))==="object"&&typeof e==="function"){i=t;n=e}return{options:i,callback:n}}createSocket(t,e,i){var n=this;return function(s){let r=new WebSocket(n.socketUrl+t);r.onerror=function(){console.error(`Error opening ${e} socket at ${n.socketUrl}${t}`)};r.onmessage=function(t){if(n.logging){console.log(t)}let e;try{e=JSON.parse(t.data)}catch(s){if(t.data==='{"token":"","timestamp":0.0,"status":"STOP","moreinfo":[]}'){n.emit(i,{token:"",timestamp:0,status:"STOP",moreinfo:[]});return}}if(e){n.emit(i,e)}};s(r)}}_dispatchWordSchedule(t){var e=this;let i=Date.now();let n=0;t=t.tokentimes.tokens.filter(function(t){return t.name!=="/pau/"});let s=function o(){let s=t[n];e.emit("word",{token:s.name,timestamp:s.start,status:"PLAY",moreinfo:[]});n++;if(n<t.length){let r=1e3*t[n].start;let u=Date.now()-i;setTimeout(o,Math.max(r-u,0))}};if(t.length){let r=1e3*t[n].start;setTimeout(s,r)}}_speak(t,e,i){var n=this;if(!this.isInitialized){i("TTS Service is not initialized");return}let s=function o(){n._getWordTimings(t,e,function(s,r){if(s){i(s)}else{n._dispatchWordSchedule(r);let o=new XMLHttpRequest;let u=JSON.parse(JSON.stringify(d));u.prompt=t;u.duration_stretch=e.duration_stretch||u.duration_stretch;u.pitchBandwidth=e.pitchBandwidth||u.pitchBandwidth;u.pitch=e.pitch||u.pitch;u.mode=e.mode||u.mode;u=JSON.stringify(u);o.open("POST",n.httpInterface+c.SPEAK,true);o.onreadystatechange=function(){if(o.readyState==4){if(o.status===204){n.isTalking=false;i()}else{let t="TTS Service is unavailable";if(o.statusText!==undefined){t=o.statusText}i(t)}}};n.isTalking=true;o.send(u)}})};if(this.isStopping){let r=function u(){n.removeListener("stopped",u);s()};this.on("stopped",r)}else if(this.isTalking){stop(s)}else{s()}}speak(t,e,i){var n=this;var s=this.getOptionsAndCallback(e,i);let r=s.callback;let o=s.options;if(!r){return new Promise(function(e,i){let s=function r(t){if(t)i(t);else e()};n._speak(t,o,s)})}else{this._speak(t,o,r)}}_stop(t){var e=this;if(!this.isInitialized){t();return}this.isStopping=true;this.isTalking=false;let i=new XMLHttpRequest;i.timeout=2e3;i.onreadystatechange=function(){if(i.readyState===4&&i.status===200){e.isStopping=false;e.emit("stopped");t()}};i.open("GET",this.httpInterface+c.STOP,true);i.send(null)}stop(t){var e=this;if(t){this._stop(t)}else{return new Promise(function(t){e._stop(t)})}}_getWordTimings(t,e,i){if(typeof t!=="string"){throw new TypeError(`Invalid params: ${t}, ${a}`)}if(!this.isInitialized){throw new Error("Not initialized. Use .init()")}let n=new XMLHttpRequest;let s=JSON.parse(JSON.stringify(d));s.prompt=t;s.duration_stretch=e.duration_stretch||s.duration_stretch;s.pitchBandwidth=e.pitchBandwidth||s.pitchBandwidth;s.pitch=e.pitch||s.pitch;s=JSON.stringify(s);n.open("POST",this.httpInterface+c.TIMING,true);n.onreadystatechange=function(){var t=n.readyState==4;var e=n.status<200||n.status>=400;if(t&&n.status==200){let s;try{s=JSON.parse(n.response)}catch(r){i(r)}if(s){if(s.Status&&s.Status==="ERROR"){i(s)}else{i(null,s)}}}else if(t&&e){i(new Error(`Request failed with status: ${n.status}`))}};n.send(s)}getWordTimings(t,e,i){var n=this;var s=this.getOptionsAndCallback(e,i);let r=s.options;let o=s.callback;if(o){this._getWordTimings(t,r,o)}else{return new Promise(function(e,i){let s=function o(t,n){if(t)i(t);else e(n)};n._getWordTimings(t,r,s)})}}_validateEffectNameParam(t){if(typeof t!=="string"){throw new TypeError(`Invalid params, name must be string: ${t}`)}if(!this.isInitialized){throw new Error("Not connected. Cannot send action.")}if(!this.effectsSocket){throw new Error("Effect socket not initialized.")}}_validateEffectValueParam(t){if(typeof t==="number"){if(t<0||t>1){throw new TypeError(`Value out of range [0, 1]: ${t}`)}}else if(typeof t!=="string"){throw new TypeError(`Value must either be a number or string: ${t}`);
}}startEffect(t,e){this._validateEffectNameParam(t);this._validateEffectValueParam(e);var i={name:t,action:f.START,param:""+e};this.effectsSocket.send(JSON.stringify(i))}stopEffect(t){this._validateEffectNameParam(t);var e={name:t,action:f.STOP,param:"0"};this.effectsSocket.send(JSON.stringify(e))}updateEffect(t,e){this._validateEffectNameParam(t);this._validateEffectValueParam(e);var i={name:t,action:f.UPDATE,param:""+e};this.effectsSocket.send(JSON.stringify(i))}}i["default"]=h},{async:void 0,events:void 0}],56:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("./ASRVariables"),r=n(s),o=t("./AudioAction"),u=n(o),a=t("./SpeakerAction"),c=n(a),l=t("./AudioSource"),f=n(l),d=t("./Recognizer"),h=n(d),p=t("./SpeakerRecognizer"),S=n(p),_=t("./EndOfSpeechRecognizer"),v=n(_),m=t("./CloudRecognizer"),b=n(m),E=t("./Listener"),g=n(E);class R{constructor(){this.isInitialized=false;this.msgs=[];this.listSpeakerCallbacks=[];this.deleteSpeakerCallbacks=[]}get Recognizer(){return h.default}get EndOfSpeechRecognizer(){return v.default}get CloudRecognizer(){return b.default}get SpeakerRecognizer(){return S.default}init(t,e){var i=this;try{this.socketUrl="ws:"+t.host+":"+t.port+"/port";this.audioUrl="http://"+t.host+":"+t.port+"/audio_source";this.asrInterfaceUrl="http://"+t.host+":"+t.port+"/asr_interface";this.speakerInterfaceUrl="http://"+t.host+":"+t.port+"/spkr_id_interface";this.socket=new WebSocket(this.socketUrl);this.loggingEnabled=false;this.socket.onerror=function(){console.warn("error connecting to server")};this.socket.onmessage=function(t){let e=JSON.parse(t.data);i.msgs.push(e);while(!i.paused&&i.msgs.length){i.processNextMessage()}};this.alsaSource=new f.default(this.audioUrl);this.alsaSource.init(function(t){if(t){console.warn(t)}i.isInitialized=true;e()})}catch(n){console.warn(n)}}pause(){this.paused=true}resume(){this.paused=false;while(this.msgs.length){this.processNextMessage()}}processNextMessage(){this.processMessage(this.msgs.shift())}processMessage(t){if(this.loggingEnabled){console.log("----------------------");console.log(t)}let e=r.default.idToAction[t.task_id];let i=r.default.idToRecognizer[t.simple_recog_name];if(t.status!=="normal"){if(t.status==="error"&&e){console.warn("ASR Service returned error response. Check ASR debug");e.emit("error",t.message)}else if(t.status==="received"||t.status==="other"){if(i){i.onResult(t)}if(this.loggingEnabled){console.log("received ASR message")}}else if(t.speaker_idstatus==="LISTING-SPEAKERS"){this.listSpeakerCallback(t)}else if(t.speaker_idstatus==="DELETING-SPEAKER"){this.deleteSpeakerCallback(t)}return}if(t.simple_recog_name==="Speaker ID TD"){if(!e){console.warn("No action found");console.log("task_id: ",t.task_id);console.log("recognizer:",i)}e.emit("speakerid",t);return}if(t.simple_recog_name==="pcmwriter"){return}if(t.final_simple){if(!i){console.warn(`Could not find recognizer with name ${t.simple_recog_name}`);return}i.onResult(t);return}else if(t.final_composite){if(!e){console.warn(`Could not find action with name ${t.task_id}`)}e.emit("finished");e.clear();return}if(t.utterances&&t.utterances.length>0&&i){if(i.onIncremental){i.onIncremental(t)}}}createWavSource(t){this.wavSource=new f.default(this.audioUrl,t);return this.wavSource}createWavAction(){let t=new u.default(this.asrInterfaceUrl);this.wavSource.link(t);return t}createAudioAction(){let t=new u.default(this.asrInterfaceUrl);this.alsaSource.link(t);return t}createSpeakerAction(){let t=new c.default(this.speakerInterfaceUrl);this.alsaSource.link(t);return t}createSpeakerActionAsync(t){let e=new c.default(this.speakerInterfaceUrl);this.alsaSource.link(e);return t(e)}listEnrolledSpeakers(t){this.listSpeakerCallbacks.push(t);this.createSpeakerActionAsync(function(t){t.listSpeakers()})}listSpeakerCallback(t){this.listSpeakerCallbacks.forEach(function(e){e(t)});this.listSpeakerCallbacks=[]}deleteSpeaker(t){let e=arguments.length<=1||arguments[1]===undefined?"TD+TI":arguments[1];let i=arguments[2];this.deleteSpeakerCallbacks.push(i);this.createSpeakerActionAsync(function(i){i.deleteSpeaker(t,e)})}deleteSpeakerCallback(t){this.deleteSpeakerCallbacks.forEach(function(e){e(t)});this.deleteSpeakerCallbacks=[]}setLogging(t){this.loggingEnabled=t}createListener(t,e){return new g.default(t,e)}}R.BASE="/usr/local/share/asrservice/sharedresources/",i["default"]=R},{"./ASRVariables":57,"./AudioAction":58,"./AudioSource":59,"./CloudRecognizer":60,"./EndOfSpeechRecognizer":61,"./Listener":62,"./Recognizer":63,"./SpeakerAction":64,"./SpeakerRecognizer":65}],57:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i["default"]={idToAction:{},idToRecognizer:{},idToAudioSource:{}}},{}],58:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("uuid"),r=n(s),o=t("./ASRVariables"),u=n(o),a=t("events");class c extends a.EventEmitter{constructor(t){super();this.httpInterface=t;this.id="action-"+r.default.v4();u.default.idToAction[this.id]=this;this.isCleared=false}setAudioSourceId(t){this.audioSourceId=t}start(t){if(this.isCleared){return}let e={action:"init_and_start",task:t,task_id:this.id,audio_source_id:this.audioSourceId};e=JSON.stringify(e);let i=new XMLHttpRequest;i.open("POST",this.httpInterface,true);i.send(e)}stop(){if(this.isCleared){return}let t=new XMLHttpRequest;let e={action:"stop",task:"",task_id:this.id,audio_source_id:this.audioSourceId};e=JSON.stringify(e);t.open("POST",this.httpInterface,true);t.send(e)}clear(){if(this.isCleared){return}delete u.default.idToAction[this.id];this.isCleared=true;let t=new XMLHttpRequest;let e={action:"clear",task:"",task_id:this.id,audio_source_id:this.audioSourceId};e=JSON.stringify(e);t.open("POST",this.httpInterface,true);t.send(e)}}i["default"]=c},{"./ASRVariables":57,events:void 0,uuid:void 0}],59:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("uuid"),r=n(s),o=t("./ASRVariables"),u=n(o);class a{constructor(t,e){let i="alsa";if(Array.isArray(e)&&e.length>0){i="wav"}else if(typeof e==="string"){i="wav";e=[e]}this.id="source-"+r.default.v4();u.default.idToAudioSource[this.id]=this;this.source=i;this.wavFiles=e||[];this.audioUrl=t}init(t){let e={action:"start",audio_source_id:this.id,audio_source:this.source,wav_files:this.wavFiles};e=JSON.stringify(e);let i=new XMLHttpRequest;i.open("POST",this.audioUrl,true);i.onreadystatechange=function(){if(i.readyState==4&&(i.status==204||i.status==200)){t()}else if(i.readyState==4&&i.status===0){t("Could not create audio channel")}};i.send(e)}destroy(t){let e={action:"stop",audio_source_id:this.id,audio_source:this.source,wav_files:[]};e=JSON.stringify(e);let i=new XMLHttpRequest;i.open("POST",this.audioUrl,true);i.onreadystatechange=function(){if(i.readyState==4&&(i.status==204||i.status==200)){t()}else if(i.readyState==4&&i.status===0){t("Could not destroy audio channel")}};i.send(e)}link(t){t.setAudioSourceId(this.id)}}i["default"]=a},{"./ASRVariables":57,uuid:void 0}],60:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("./Recognizer"),r=n(s),o=t("../../Runtime"),u=n(o);let a={INVALID:0,COMPILING:1,COMPILE_FAILED:2,COMPILE_SUCCEEDED:3};class c extends r.default{constructor(t,e){e=e?e:{};e.path="nuance_curlmulti";super(e);this.rule=t;this.handle=null;this.status=a.INVALID;this.callbacks=[];this.type="cloud";if(this.rule){this.compile(function(){})}}setRuleHandle(t){this.handle=t;this.status=a.COMPILE_SUCCEEDED}callCallbacks(t){this.callbacks.forEach(function(e){e(t)});this.callbacks.length=0}compile(t){var e=this;this.callbacks.push(t);if(this.status===a.INVALID){this.status=a.COMPILING;u.default.instance.nlu.compile(this.rule,function(t,i){if(t){e.status=a.COMPILE_FAILED;console.warn(t);e.callCallbacks("error")}else{e.status=a.COMPILE_SUCCEEDED;e.handle=i;e.callCallbacks()}})}else if(this.status===a.COMPILE_FAILED){this.callCallbacks("error")}else if(this.status===a.COMPILE_SUCCEEDED){this.callCallbacks()}}onResult(t){var e=this;let i=u.default.instance.asr;let n=u.default.instance.nlu;i.pause();let s=t.utterances[0].utterance;let r=t.message_id;if(this.rule){this.compile(function(t){let o=t?n.parseFromRule.bind(n):n.parseFromURI.bind(n);let u=t?e.rule:e.handle;o(u,s,function(t,n){if(t){e.emit("error",t)}else{e.emit("result",n)}i.resume()},r)})}else{this.emit("result",{Input:s});i.resume()}}onIncremental(t){var e=this;let i=u.default.instance.nlu;let n=t.utterances[0].utterance;let s=t.message_id;if(this.rule){this.compile(function(t){let r=t?i.parseFromRule.bind(i):i.parseFromURI.bind(i);let o=t?e.rule:e.handle;r(o,n,function(t,i){if(t){e.emit("error",t)}else{e.emit("incremental",i)}},s)})}else{this.emit("inremental",{Input:n})}}}i["default"]=c},{"../../Runtime":1,"./Recognizer":63}],61:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("./Recognizer"),r=n(s);class o extends r.default{constructor(t){t=t||{};t.path="sensory_speech_detector";t.speakerId=false;super(t);this.type="eos"}onResult(t){if(t.status==="normal"){this.emit("result",t)}}}i["default"]=o},{"./Recognizer":63}],62:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("events"),r=t("../../Runtime"),o=n(r);class u extends s.EventEmitter{constructor(t,e){super();this.options=t;this.rule=e;this.status="INVALID"}onFinished(){let t=arguments.length<=0||arguments[0]===undefined?"SUCCEEDED":arguments[0];this.emit("finished");this.status=t;this.removeAllListeners();this.action.stop();this.action.clear()}heyJiboResult(){if(this.heyJiboPhrase&&this.tdSpeakerResult){this.emit("embedded",this.heyJiboPhrase,this.tdSpeakerResult)}}cloudResult(){if(this.asrResult&&this.tiSpeakerResult){this.emit("cloud",this.asrResult,this.tiSpeakerResult)}}addCloudRecognizer(t){var e=this;let i=t;i.speakerId=false;let n=new this.asr.CloudRecognizer(this.rule,i);if(this.options.precompiledHandle){n.setRuleHandle(this.options.precompiledHandle)}n.on("result",function(t){e.asrResult=t;e.cloudResult();n.removeAllListeners("result")});n.on("error",function(t){e.emit("error",t)});if(t.incremental){n.on("incremental",function(t){e.emit("incremental",t)})}return`${n.pack()}`}addHeyJibo(){var t=this;let e=``;let i=new this.asr.Recognizer({path:"hey_jibo"});i.on("result",function(e){t.heyJiboPhrase=e;t.heyJiboResult();i.removeAllListeners("result")});e=this.tdReco?`(${i.pack()} * ${this.tdReco.pack()})`:`${i.pack()}`;return`(${e})`}addSpeakerRecognizers(){var t=this;this.tiReco=new this.asr.SpeakerRecognizer({authTI:true});this.tiReco.on("result",function(e){t.tiSpeakerResult=e;t.cloudResult();t.tiReco.removeAllListeners("result")});return`(${this.tiReco.pack()})`}addEOSRecognizer(){var t=this;let e=new this.asr.EndOfSpeechRecognizer({});e.on("result",function(){t.emit("end");e.removeAllListeners("result")});return`${e.pack()}`}start(){var t=this;this.asr=o.default.instance.asr;if(this.status==="IN_PROGRESS"){this.emit("error","cannot restart; listener is currently in progress.");return false}this.status="IN_PROGRESS";this.tiSpeakerResult={};this.tiSpeakerResult.speaker_ids=[];this.tiSpeakerResult.speaker_idstatus="ID-TI-NOT-AVAILABLE";this.tdSpeakerResult=false;this.action=this.asr.createAudioAction();this.action.on("finished",function(){t.onFinished()});this.action.on("speakerid",function(e){let i=e.speaker_ids;let n=e.speaker_idstatus;t.tdSpeakerResult={speakerIds:i,speakerIdStatus:n};t.heyJiboResult()});this.action.on("error",function(e){t.emit("error",e)});let e;if(!this.options.embeddedOnly){e=this.addCloudRecognizer(this.options);if(this.options.detectEnd){let i=this.addEOSRecognizer();e=`(${i} | ${e})`}if(this.options.heyJibo){let n=this.addHeyJibo();e=`(${n} * ${e})`}}else{e=this.addHeyJibo()}this.action.start(e);return true}stop(){this.onFinished("STOPPED")}}i["default"]=u},{"../../Runtime":1,events:void 0}],63:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("uuid"),r=n(s),o=t("./ASRVariables"),u=n(o),a=t("./ASRService"),c=n(a),l=t("events");class f extends l.EventEmitter{constructor(t){super();this.name=r.default.v4();t=t||{};this.bargein=typeof t.bargein==="boolean"?t.bargein:true;this.incremental=typeof t.incremental==="boolean"?t.incremental:false;this.timeout=t.timeout||0;this.authenticateSpeaker=t.authenticateSpeaker||"";this.speakerId=typeof t.speakerId==="boolean"?t.speakerId:true;this.nbest=t.nbest||1;if(t.path){this.path=c.default.BASE+t.path}else{this.path=c.default.BASE+"nuance_curlmulti"}let e=this.path.split("/");this.name=e[e.length-1]+"-"+this.name;u.default.idToRecognizer[this.name]=this}setPath(t){this.path=c.default.BASE+t}toString(){return this.pack()}pack(){return JSON.stringify({name:this.name,path:this.path,bargein:this.bargein,nbest:this.nbest,speaker_name:this.authenticateSpeaker,speaker_id:this.speakerId,incremental:this.incremental})}onResult(t){if(t.utterances&&t.utterances.length>0){let e={speaker_ids:t.speaker_ids,speaker_idstatus:t.speaker_idstatus};this.emit("result",t.utterances[0],e)}else{let e={speaker_ids:t.speaker_ids,speaker_idstatus:t.speaker_idstatus};this.emit("result","",e)}}}i["default"]=f},{"./ASRService":56,"./ASRVariables":57,events:void 0,uuid:void 0}],64:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("uuid"),r=n(s),o=t("./ASRVariables"),u=n(o),a=t("events");class c extends a.EventEmitter{constructor(t){super();this.httpInterface=t;this.id="spkr-action-"+r.default.v4();u.default.idToAction[this.id]=this}setAudioSourceId(t){this.audioSourceId=t}deleteSpeaker(){let t=arguments.length<=0||arguments[0]===undefined?"":arguments[0];let e=arguments[1];let i=new XMLHttpRequest;let n={action:"delete",task_id:this.id,spkr_id_type:e,speaker_name:t};n=JSON.stringify(n);i.open("POST",this.httpInterface,true);i.send(n)}listSpeakers(){let t=arguments.length<=0||arguments[0]===undefined?"":arguments[0];let e=arguments[1];let i=new XMLHttpRequest;let n={action:"list",task_id:this.id,spkr_id_type:e||"TD+TI",speaker_name:t};n=JSON.stringify(n);i.open("POST",this.httpInterface,true);i.send(n)}}i["default"]=c},{"./ASRVariables":57,events:void 0,uuid:void 0}],65:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("./Recognizer"),r=n(s);class o extends r.default{constructor(){let t=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];if(t.enrollTD){t.path="sensory_spkr_enroll_td"}else if(t.enrollTI){t.path="sensory_spkr_enroll_ti"}else if(t.authTD){t.path="sensory_spkr_id_td"}else if(t.authTI){t.path="sensory_spkr_id_ti"}super(t)}toString(){return this.pack()}pack(){let t={name:this.name,path:this.path,bargein:this.bargein,nbest:this.nbest,speaker_name:this.authenticateSpeaker,incremental:this.incremental,audio_tail_length:1};t=JSON.stringify(t);return t}onResult(t){let e={speakerIds:t.speaker_ids,speakerIdStatus:t.speaker_idstatus};this.emit("result",e)}}i["default"]=o},{"./Recognizer":63}],66:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("./ASRService"),r=n(s),o=t("./ASRVariables"),u=n(o),a=t("./AudioAction"),c=n(a),l=t("./AudioSource"),f=n(l),d=t("./CloudRecognizer"),h=n(d),p=t("./EndOfSpeechRecognizer"),S=n(p),_=t("./Listener"),v=n(_),m=t("./Recognizer"),b=n(m),E=t("./SpeakerAction"),g=n(E),R=t("./SpeakerRecognizer"),y=n(R);i["default"]={ASRService:r["default"],ASRVariables:u["default"],AudioAction:c["default"],AudioSource:f["default"],CloudRecognizer:h["default"],EndOfSpeechRecognizer:S["default"],Listener:v["default"],Recognizer:b["default"],SpeakerAction:g["default"],SpeakerRecognizer:y["default"]}},{"./ASRService":56,"./ASRVariables":57,"./AudioAction":58,"./AudioSource":59,"./CloudRecognizer":60,"./EndOfSpeechRecognizer":61,"./Listener":62,"./Recognizer":63,"./SpeakerAction":64,"./SpeakerRecognizer":65}],67:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("./SystemManager"),r=n(s),o=t("./SessionManager"),u=n(o),a=t("./TTSService"),c=n(a),l=t("./BodyService"),f=n(l),d=t("./LPSService"),h=n(d),p=t("./NLUService"),S=n(p),_=t("./asr"),v=n(_);i["default"]={asr:v["default"],SystemManager:r["default"],SessionManager:u["default"],TTSService:c["default"],BodyService:f["default"],LPSService:h["default"],NLUService:S["default"]}},{"./BodyService":50,"./LPSService":51,"./NLUService":52,"./SessionManager":53,"./SystemManager":54,"./TTSService":55,"./asr":66}],68:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function s(t){o.animate.createAnimationUtilities=function(){return console.warn("Warning: createAnimationUtilities() is deprecated. Access anim utils via jibo.animate."),t},t.createAnimationUtilities=function(){return t},t.createAnimationBuilderFromKeysPath=function(e,i,n){p["default"].getProjectRoot(function(s,r){p["default"].getBaseDirectory(l["default"].parse(e).dir,function(s,o){a["default"].keysToAnimObjectAsync(e,function(e){function s(t,e,i){let n=d["default"].getPath(i.file);d["default"].startAudio(n,o===r?"":o)}function u(){a.off("playAudio",s),a.off("STOPPED",u)}let a=t.createAnimationBuilderFromData(e,i);a.on("play-audio",s),a.on("STOPPED",u),n(a)})})})},t.MODALITY_NAME=o.animate.MODALITY_NAME,t.trajectory=o.animate.trajectory,t.AnimationEventType=o.animate.AnimationEventType,t.LookatEventType=o.animate.LookatEventType,t.THREE=o.THREE}function r(){let t=o.visualize.createRobotRenderer;o.visualize.robotInfo=S,o.visualize.timeline=_,o.visualize.createRobotRenderer=function(e,i,n){t(S,e,i,function(t){null!==t?(o.TimelineBuilder.connectRenderer(_,t),n&&n(null,t)):n&&n("Renderer creation failed")})}}Object.defineProperty(i,"__esModule",{value:!0});var o=t("animation-utilities"),u=t("jibo-keyframes"),a=n(u),c=t("path"),l=n(c),f=t("../utils/AudioUtils"),d=n(f),h=t("../utils/PathUtils"),p=n(h);let S,_;class v{static init(t,e){let i=new o.JiboConfig;o.RobotInfo.createInfo(i,function(i){o.TimelineBuilder.createTimeline(i,function(n){S=i;_=n;t.init(_,S);s(t);r();e()})})}}i["default"]=v},{"../utils/AudioUtils":69,"../utils/PathUtils":70,"animation-utilities":void 0,"jibo-keyframes":void 0,path:void 0}],69:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("./PathUtils"),r=n(s);class o{static getPath(t){return r.default.setDefaultPath("audio",t)}static startAudio(t,e,i){let n=new Audio;r.default.getAssetUri(t,e,function(t){n.src=t;n.autoplay=true;n.controls=false;if(i){let e=function s(t){n.removeEventListener(t.type,s);i(t)};n.addEventListener("ended",e)}});return n}}i["default"]=o},{"./PathUtils":70}],70:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("fs"),r=n(s),o=t("path"),u=n(o),a=t("module"),c=n(a);class l{static getBaseDirectory(e,i){r.default.readdir(e,function(n,s){let r=false;for(let o=0;o<s.length;o++){if(u.default.parse(s[o]).base==="package.json"){r=true;i(e,t(u.default.join(e,s[o])).name)}}if(!r){l.getBaseDirectory(u.default.resolve(e,".."),i)}})}static getProjectRoot(t){l.getBaseDirectory(process.cwd(),t)}static setDefaultPath(t,e){let i=e.split("://");if(i.length==1){e=u.default.join(t,e)}else{e=i[0]+"://"+t+"/"+i[1]}return e}static getAssetPack(t){let e=t.split("://");return e.length==1?"":e[0]}static getAssetUri(t,e,i){let n=t.split("://");if(n.length==1&&e){let s=u.default.join(l.resolve(e+"/package.json"),"..");let r=u.default.join(s,t);i(r,s)}else if(n.length===2){let s=u.default.join(l.resolve(n[0]+"/package.json"),"..");let r=u.default.join(s,n[1]);i(r,s)}else if(n.length==1){let o=t;l.getProjectRoot(function(t){let e=u.default.join(t,o);i(e,t)})}}static resolve(t){let e=u.default.resolve(process.cwd());let i=u.default.join(e,"noop.js");try{return c.default._resolveFilename(t,{id:i,filename:i,paths:c.default._nodeModulePaths(e)})}catch(n){return null}}}i["default"]=l},{fs:void 0,module:void 0,path:void 0}],71:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("./AudioUtils"),r=n(s),o=t("./PathUtils"),u=n(o),a=t("./AnimationUtils"),c=n(a);i["default"]={AnimationUtils:c["default"],AudioUtils:r["default"],PathUtils:u["default"]}},{"./AnimationUtils":68,"./AudioUtils":69,"./PathUtils":70}],72:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var s=t("./bt"),r=n(s),o=t("./services"),u=n(o),a=t("./utils"),c=n(a),l=t("./Runtime"),f=n(l),d=t("./deprecation"),h=n(d),p=t("ws-without-native"),S=n(p);GLOBAL.WebSocket=S["default"],Object.assign||(Object.assign=t("object-assign"));let _={bt:r["default"],services:u["default"],utils:c["default"],Runtime:f["default"]};(0,h["default"])(_),i["default"]=new f["default"](_)},{"./Runtime":1,"./bt":48,"./deprecation":49,"./services":67,"./utils":71,"object-assign":void 0,"ws-without-native":void 0}]},{},[72])(72)});